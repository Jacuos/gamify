<div class="container">
  <h1>Rejestracja</h1>
  <form (ngSubmit)="onSubmit(heroForm.value)" #heroForm="ngForm" novalidate>
    <div class="form-group">
      <label for="login">Login</label>
      <input type="text" class="form-control" id="login" required minlength="3" maxlength="20" (keyup)="checkDuplicate(login.value)" pattern = "^[a-zA-Z0-9-]+"[(ngModel)]="rglogin.login" name="login"   #login="ngModel">
      <div [hidden]="login.valid || login.untouched" class="alert alert-danger">
        Login jest wymagany. Musi zawierać minimum 3 znaki. Może składać się tylko z liter i cyfr.
      </div>
      <input type="hidden" class="form-control" id="uniq" required [ngModel]="uniqueLogin|async" (ngModelChange)="uniqueLogin=$event" name="uniqueLogin" #uniq="ngModel">
      <div [hidden]="uniq.value!=false" class="alert alert-danger">
        Niestety, podany login już istnieje. Proszę podać inny login.
      </div>
    </div>
    <div class="form-group">
    <label for="password">Hasło - musi zawierać minimum 8 znaków, dużą literę, małą literę i cyfrę.</label>
    <input type="password" class="form-control" id="password" required minlength="8" maxlength="50" pattern = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$" [(ngModel)]="rglogin.password" name="password" #password="ngModel">
      <div [hidden]="password.valid || password.untouched" class="alert alert-danger">
        Podane hasło nie spełnia wymagań.
      </div>
      <label for="password2">Powtórz hasło</label>
      <input type="password" class="form-control" id="password2" required validatepassword={{rglogin.password}} [(ngModel)]="password2" name="password2" #pass2="ngModel">
      <div [hidden]="pass2.valid || pass2.untouched" class="alert alert-danger">
        Wpisane hasła się nie zgadzają.
      </div>
  </div>
    <div class="form-group">
      <label for="email">E-mail</label>
      <input type="text" class="form-control" id="email" required pattern = "^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$"[(ngModel)]="rglogin.email" name="email" #email="ngModel">
      <div [hidden]="email.valid || email.untouched" class="alert alert-danger">
        Poprawny email jest wymagany.
      </div>
    </div>
    <div class="form-group">
      <label for="firstname">Imię</label>
      <input type="text" class="form-control" id="firstname" required  maxlength="20" pattern="[^ .!#$%&’*+/=?^_`{|}~]+" [(ngModel)]="rguser.firstName" name="firstName" #firstname="ngModel">
      <div [hidden]="firstname.valid || firstname.untouched" class="alert alert-danger">
        Imię jest wymagane.
      </div>
    </div>
  <div class="form-group">
    <label for="lastname">Nazwisko</label>
    <input type="text" class="form-control" id="lastname" required  maxlength="20" pattern="[^ .!#$%&’*+/=?^_`{|}~]+" [(ngModel)]="rguser.lastName" name="lastName" #lastname="ngModel">
    <div [hidden]="lastname.valid || lastname.untouched" class="alert alert-danger">
     Nazwisko jest wymagane.
    </div>
  </div>
    <div class="form-group">
      <label for="description">Opis</label>
      <input type="text" class="form-control" id="description" [(ngModel)]="rguser.description" name="description">
    </div>
  <button type="submit" class="btn btn-success" [disabled]="!heroForm.form.valid">Zarejestruj</button>
  </form>
</div>
